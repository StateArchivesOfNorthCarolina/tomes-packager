<mets xmlns="http://www.loc.gov/METS/" 
xmlns:xlink="http://www.w3.org/1999/xlink" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

  <metsHdr CREATEDATE="{{ TIMESTAMP() }}">
    <agent ROLE="CREATOR" TYPE="OTHER" OTHERTYPE="Software Agent">
      <name>TOMES Packager</name>
    </agent>
  </metsHdr>
  
  %% for rdf in RDFS %%
  <dmdSec ID="dmdSec__{{ rdf.name }}">
    <mdWrap MDTYPE="DC">
      <xmlData>
        {{ rdf.xml }}
      </xmlData>
    </mdWrap>
  </dmdSec>
  %% endfor %%

    <!--# !!! WARNING !!!
  DO NOT edit below this line unless you are very comfortabel with Python, Jinja templates, and METS.
  #-->
    <fileSec ID="fileSec">
  <fileGrp ID="fileGrp_">
  %% for file in FILES %%
    <file 
    SIZE="{{ file.size }}" 
    ID="_{{ file.index }}" 
    MIMETYPE="{{ file.mimetype }}" 
    CREATED="{{ file.created }}" 
    CHECKSUM="{{ file.checksum }}" 
    CHECKSUMTYPE="{{ file.checksum_algorithm }}">
      <FLocat xlink:href="{{ file.name }}" LOCTYPE="OTHER" OTHERLOCTYPE="SYSTEM" />
    </file>
  %% endfor %%
  </fileGrp>
  %% for folder in FOLDERS %%
        <fileGrp ID="FileGrp_{{ folder.name }}">
        %% for file in folder.rfiles %%
            <file 
            SIZE="{{ file.size }}" 
            ID="_{{ folder.name }}_{{ file.index }}" 
            MIMETYPE="{{ file.mimetype }}" 
            CREATED="{{ file.created }}" 
            CHECKSUM="{{ file.checksum }}" 
            CHECKSUMTYPE="{{ file.checksum_algorithm }}">
                <FLocat xlink:href="{{ file.name }}" LOCTYPE="OTHER" OTHERLOCTYPE="SYSTEM" />
            </file>
        %% endfor %%
        </fileGrp>
    %% endfor %%
    </fileSec>
    <structMap>
        <div>
            <div ID="Div_">
      %% for file in FILES %%
                <fptr FILEID="__{{ file.index }}"/>
            %% endfor %%
            </div>
        %% for folder in FOLDERS %%
            <div ID="Div_{{ folder.name }}">
            %% for file in folder.rfiles %%
                <fptr FILEID="_{{ folder.name }}_{{ file.index }}"/>
            %% endfor %%
            </div>
        %% endfor %%
        </div>
    </structMap>

</mets>
